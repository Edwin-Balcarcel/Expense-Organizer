<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .container {
            max-width: 750px;
            width: 100%;
            background: rgba(44, 44, 44, 0.9);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3), 0 0 40px rgba(0, 0, 0, 0.7);
            text-align: center;
            position: relative;
            border: 2px solid #00ffff;
            animation: glow 2s infinite alternate;
        }
        @keyframes glow {
            from { box-shadow: 0 0 10px #00ffff; }
            to { box-shadow: 0 0 20px #00ffff, 0 0 30px #ff00ff; }
        }
        h1 {
            font-size: 32px;
            color: #00d4ff;
            margin-bottom: 15px;
            text-shadow: 0 0 10px #00d4ff;
        }
        .progress {
            width: 100%;
            background: #333;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid #00ffff;
        }
        .progress-bar {
            height: 15px;
            background: linear-gradient(90deg, #00d4ff, #ff00ff);
            width: 0;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        .flashcard {
            background: rgba(58, 58, 58, 0.9);
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #00ffff;
        }
        .flashcard:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 15px #00ffff;
        }
        .flashcard p {
            margin: 10px 0;
            font-size: 18px;
            color: #e0e0e0;
        }
        .notes {
            width: 100%;
            height: 60px;
            margin-top: 10px;
            padding: 8px;
            background: #2a2a2a;
            border: 1px solid #00ffff;
            border-radius: 8px;
            color: #e0e0e0;
            resize: none;
            font-size: 14px;
        }
        button {
            padding: 12px 24px;
            margin: 8px;
            border: none;
            border-radius: 8px;
            background: #ff00ff;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.3s ease, background 0.3s ease;
            border: 1px solid #00ffff;
        }
        button:hover {
            transform: scale(1.05);
            background: linear-gradient(45deg, #00b3d9, #cc00cc);
        }
        .reset-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #ff4040;
            padding: 10px 20px;
            border: 1px solid #ff4040;
        }
        .reset-button:hover {
            background: #cc3333;
        }
        .section {
            margin-top: 30px;
        }
        .learned-list, .quiz-results {
            background: rgba(58, 58, 58, 0.9);
            padding: 15px;
            border-radius: 10px;
            max-height: 250px;
            overflow-y: auto;
            font-size: 16px;
            border: 1px solid #00ffff;
        }
        .hidden {
            display: none;
        }
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            h1 {
                font-size: 24px;
            }
            button {
                padding: 10px 20px;
                font-size: 14px;
            }
            .reset-button {
                top: 15px;
                right: 15px;
                padding: 8px 16px;
            }
            .notes {
                height: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Flashcards</h1>
        <div class="progress">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <p id="progress-text">Palabras aprendidas: 0/170</p>
        <button class="reset-button" onclick="resetApp()">Reset</button>
        <div id="flashcard" class="flashcard">
            <p><strong>Word:</strong> <span id="word"></span> (<span id="ipa"></span>)</p>
            <p><strong>Definition:</strong> <span id="definition"></span></p>
            <p><strong>Example:</strong> <span id="example"></span></p>
            <textarea id="notes" class="notes" placeholder="Add your notes here..."></textarea>
            <button onclick="markLearned()">Mark as Learned</button>
            <button onclick="nextWord()">Next Word</button>
            <button onclick="randomWord()">Random Word</button>
        </div>
        <div class="section">
            <h2>Palabras Aprendidas</h2>
            <div id="learned-list" class="learned-list"></div>
        </div>
        <div class="section">
            <h2>Evaluación de Aprendizaje</h2>
            <button onclick="startQuiz()">Start Quiz</button>
            <div id="quiz" class="hidden">
                <p><strong>Question:</strong> What is the meaning of "<span id="quiz-word"></span>"?</p>
                <input type="text" id="quiz-answer" placeholder="Type your answer">
                <button onclick="submitAnswer()">Submit</button>
                <p id="quiz-feedback"></p>
            </div>
            <div id="quiz-results" class="quiz-results"></div>
        </div>
    </div>

    <script>
        // Lista de palabras TOEFL (170 total: 70 originales + 100 nuevas)
        const words = [
            // Originales (70)
            { word: "benefit", ipa: "/ˈbenɪfɪt/", definition: "An advantage or gain", example: "Learning English has many benefits for my career." },
            { word: "challenge", ipa: "/ˈtʃælɪndʒ/", definition: "A difficult task", example: "Coding a new app is a fun challenge." },
            { word: "improve", ipa: "/ɪmˈpruːv/", definition: "To make better", example: "I want to improve my pronunciation." },
            { word: "affect", ipa: "/əˈfekt/", definition: "To influence", example: "Music affects my mood positively." },
            { word: "resource", ipa: "/ˈriːsɔːrs/", definition: "A supply or support", example: "Online tutorials are great resources for coding." },
            { word: "develop", ipa: "/dɪˈveləp/", definition: "To grow or create", example: "They developed a new music app." },
            { word: "focus", ipa: "/ˈfoʊkəs/", definition: "To concentrate", example: "I focus on learning new words daily." },
            { word: "method", ipa: "/ˈmeθəd/", definition: "A way of doing something", example: "His method for mixing music is unique." },
            { word: "require", ipa: "/rɪˈkwaɪr/", definition: "To need", example: "The TOEFL requires good vocabulary." },
            { word: "support", ipa: "/səˈpɔːrt/", definition: "To help or sustain", example: "My tutor supports my English learning." },
            { word: "access", ipa: "/ˈækses/", definition: "The ability to use something", example: "I have access to great coding tools." },
            { word: "create", ipa: "/kriˈeɪt/", definition: "To make something new", example: "Artists create amazing music." },
            { word: "factor", ipa: "/ˈfæktər/", definition: "Something that influences", example: "Talent is a factor in music success." },
            { word: "increase", ipa: "/ɪnˈkriːs/", definition: "To make larger", example: "I want to increase my vocabulary." },
            { word: "process", ipa: "/ˈprɑːses/", definition: "A series of actions", example: "Learning English is a long process." },
            { word: "respond", ipa: "/rɪˈspɑːnd/", definition: "To answer", example: "She responded to the question confidently." },
            { word: "source", ipa: "/sɔːrs/", definition: "The origin of something", example: "The internet is a source of knowledge." },
            { word: "structure", ipa: "/ˈstrʌktʃər/", definition: "The way something is organized", example: "The song has a clear structure." },
            { word: "technology", ipa: "/tekˈnɑːlədʒi/", definition: "The use of science in tools", example: "Technology changes music production." },
            { word: "value", ipa: "/ˈvæljuː/", definition: "The importance of something", example: "I value good music." },
            { word: "analyze", ipa: "/ˈænəˌlaɪz/", definition: "To examine in detail", example: "We need to analyze the data before deciding." },
            { word: "significant", ipa: "/sɪɡˈnɪfɪkənt/", definition: "Important or meaningful", example: "The discovery had a significant impact on science." },
            { word: "evaluate", ipa: "/ɪˈvæljuˌeɪt/", definition: "To assess or judge", example: "Teachers evaluate students' progress regularly." },
            { word: "contribute", ipa: "/kənˈtrɪbjut/", definition: "To give or add to something", example: "She contributed ideas to the project." },
            { word: "perspective", ipa: "/pərˈspɛktɪv/", definition: "A point of view", example: "His perspective on music is unique." },
            { word: "implement", ipa: "/ˈɪmpləˌmɛnt/", definition: "To put into action", example: "We implemented a new software system." },
            { word: "impact", ipa: "/ˈɪmpækt/", definition: "A strong effect", example: "Technology has a great impact on society." },
            { word: "approach", ipa: "/əˈproʊtʃ/", definition: "A way of dealing with something", example: "Her approach to coding is creative." },
            { word: "sustainability", ipa: "/səˌsteɪnəˈbɪlɪti/", definition: "Ability to maintain or preserve", example: "Sustainability is key for the environment." },
            { word: "innovation", ipa: "/ˌɪnəˈveɪʃən/", definition: "A new idea or method", example: "AI is driving innovation in music." },
            { word: "assess", ipa: "/əˈsɛs/", definition: "To evaluate or estimate", example: "We need to assess the project's risks." },
            { word: "diverse", ipa: "/daɪˈvɜrs/", definition: "Varied or different", example: "The team has diverse skills." },
            { word: "establish", ipa: "/ɪˈstæblɪʃ/", definition: "To set up or create", example: "They established a new company." },
            { word: "priority", ipa: "/praɪˈɔrɪti/", definition: "Something given special attention", example: "Learning English is my priority." },
            { word: "context", ipa: "/ˈkɒntɛkst/", definition: "The situation or background", example: "Context is important in understanding lyrics." },
            { word: "relevant", ipa: "/ˈrɛləvənt/", definition: "Closely connected or appropriate", example: "Her comments were relevant to the discussion." },
            { word: "hypothesis", ipa: "/haɪˈpɒθəsɪs/", definition: "A proposed explanation", example: "The hypothesis was tested in the lab." },
            { word: "integrate", ipa: "/ˈɪntɪˌɡreɪt/", definition: "To combine or incorporate", example: "We integrated new features into the app." },
            { word: "constraint", ipa: "/kənˈstreɪnt/", definition: "A limitation or restriction", example: "Budget constraints limited our options." },
            { word: "evidence", ipa: "/ˈevɪdəns/", definition: "Proof or indication", example: "There is evidence that music boosts creativity." },
            { word: "ameliorate", ipa: "/əˈmiːliəˌreɪt/", definition: "To make better or improve", example: "New software can ameliorate user experience." },
            { word: "ubiquitous", ipa: "/juˈbɪkwɪtəs/", definition: "Present everywhere", example: "Smartphones are ubiquitous in modern society." },
            { word: "disparity", ipa: "/dɪˈspærɪti/", definition: "A great difference", example: "There’s a disparity in access to technology." },
            { word: "profound", ipa: "/prəˈfaʊnd/", definition: "Deep or insightful", example: "The lyrics had a profound impact on me." },
            { word: "cohesive", ipa: "/koʊˈhiːsɪv/", definition: "Unified or connected", example: "The album feels cohesive from start to finish." },
            { word: "mitigate", ipa: "/ˈmɪtɪˌɡeɪt/", definition: "To reduce or lessen", example: "We need to mitigate errors in the code." },
            { word: "paradigm", ipa: "/ˈpærəˌdaɪm/", definition: "A model or framework", example: "AI represents a new paradigm in technology." },
            { word: "ambiguous", ipa: "/æmˈbɪɡjuəs/", definition: "Unclear or having multiple meanings", example: "The song’s lyrics were ambiguous." },
            { word: "articulate", ipa: "/ɑːrˈtɪkjəˌleɪt/", definition: "To express clearly", example: "She articulated her ideas about music." },
            { word: "concur", ipa: "/kənˈkɜːr/", definition: "To agree", example: "I concur with your view on tech innovation." },
            { word: "discrepancy", ipa: "/dɪˈskrepənsi/", definition: "A difference or inconsistency", example: "There was a discrepancy in the data output." },
            { word: "empirical", ipa: "/ɛmˈpɪrɪkəl/", definition: "Based on observation or experience", example: "Empirical evidence supports the theory." },
            { word: "incentive", ipa: "/ɪnˈsentɪv/", definition: "A reason to do something", example: "Learning English is an incentive for my career." },
            { word: "intricate", ipa: "/ˈɪntrɪkət/", definition: "Complex or detailed", example: "The song’s production is intricate." },
            { word: "pervasive", ipa: "/pərˈveɪsɪv/", definition: "Spreading widely", example: "Social media is pervasive in music culture." },
            { word: "plausible", ipa: "/ˈplɔːzəbəl/", definition: "Seemingly reasonable", example: "His explanation for the bug was plausible." },
            { word: "pragmatic", ipa: "/præɡˈmætɪk/", definition: "Practical and realistic", example: "Her pragmatic approach solved the issue." },
            { word: "prevalent", ipa: "/ˈprevələnt/", definition: "Widespread or common", example: "Streaming is prevalent in music today." },
            { word: "redundant", ipa: "/rɪˈdʌndənt/", definition: "No longer needed or repetitive", example: "The code had redundant lines." },
            { word: "substantial", ipa: "/səbˈstænʃəl/", definition: "Large or significant", example: "The app received substantial funding." },
            { word: "synthesis", ipa: "/ˈsɪnθəsɪs/", definition: "Combining parts into a whole", example: "The song is a synthesis of genres." },
            { word: "transient", ipa: "/ˈtrænziənt/", definition: "Temporary or passing", example: "Trends in music are often transient." },
            { word: "viable", ipa: "/ˈvaɪəbəl/", definition: "Capable of working successfully", example: "The startup has a viable business model." },
            { word: "advocate", ipa: "/ˈædvəˌkeɪt/", definition: "To support or recommend", example: "He advocates for open-source software." },
            { word: "coherent", ipa: "/koʊˈhɪrənt/", definition: "Logical and consistent", example: "Her essay was coherent and well-written." },
            { word: "compelling", ipa: "/kəmˈpelɪŋ/", definition: "Captivating or convincing", example: "The music video was compelling." },
            { word: "detrimental", ipa: "/ˌdetrɪˈmentəl/", definition: "Harmful or damaging", example: "Bugs can be detrimental to an app." },
            { word: "exacerbate", ipa: "/ɪɡˈzæsərˌbeɪt/", definition: "To make worse", example: "Ignoring the issue will exacerbate it." },
            { word: "facilitate", ipa: "/fəˈsɪlɪˌteɪt/", definition: "To make easier", example: "Apps facilitate music sharing." },
            { word: "scrutinize", ipa: "/ˈskruːtəˌnaɪz/", definition: "To examine closely", example: "We scrutinized the code for errors." },
            // Nuevas (100)
            { word: "hope", ipa: "/hoʊp/", definition: "A feeling of expectation", example: "I hope to pass the TOEFL exam." },
            { word: "effort", ipa: "/ˈɛfərt/", definition: "Hard work or attempt", example: "She put a lot of effort into her studies." },
            { word: "success", ipa: "/səkˈsɛs/", definition: "Achieving a goal", example: "His success came from hard work." },
            { word: "problem", ipa: "/ˈprɑːbləm/", definition: "A difficult situation", example: "We need to solve this problem quickly." },
            { word: "idea", ipa: "/aɪˈdiːə/", definition: "A thought or plan", example: "She had a great idea for the project." },
            { word: "time", ipa: "/taɪm/", definition: "A measure of moments", example: "I don’t have much time today." },
            { word: "work", ipa: "/wɜːrk/", definition: "Activity to achieve something", example: "He goes to work every morning." },
            { word: "friend", ipa: "/frɛnd/", definition: "A person you like", example: "My friend helped me with my homework." },
            { word: "family", ipa: "/ˈfæmɪli/", definition: "A group of relatives", example: "My family lives in another city." },
            { word: "help", ipa: "/hɛlp/", definition: "To assist someone", example: "Can you help me with this task?" },
            { word: "study", ipa: "/ˈstʌdi/", definition: "To learn or prepare", example: "I study English every day." },
            { word: "plan", ipa: "/plæn/", definition: "A detailed proposal", example: "We need a plan for the weekend." },
            { word: "goal", ipa: "/ɡoʊl/", definition: "An aim or target", example: "My goal is to learn 10 words daily." },
            { word: "change", ipa: "/tʃeɪndʒ/", definition: "To make different", example: "The weather can change quickly." },
            { word: "group", ipa: "/ɡruːp/", definition: "A number of people", example: "We work in a small group." },
            { word: "skill", ipa: "/skɪl/", definition: "An ability to do something", example: "Cooking is a useful skill." },
            { word: "team", ipa: "/tiːm/", definition: "A group working together", example: "Our team won the game." },
            { word: "money", ipa: "/ˈmʌni/", definition: "Currency or cash", example: "I need money to buy a book." },
            { word: "job", ipa: "/dʒɒb/", definition: "A paid position", example: "She has a new job in marketing." },
            { word: "life", ipa: "/laɪf/", definition: "The period of existence", example: "Travel makes life exciting." },
            { word: "day", ipa: "/deɪ/", definition: "A period of 24 hours", example: "I work hard every day." },
            { word: "night", ipa: "/naɪt/", definition: "The time after sunset", example: "I study at night sometimes." },
            { word: "home", ipa: "/hoʊm/", definition: "A place of residence", example: "I feel safe at home." },
            { word: "school", ipa: "/skuːl/", definition: "A place for education", example: "I go to school every morning." },
            { word: "book", ipa: "/bʊk/", definition: "A written work", example: "I read a book last night." },
            { word: "food", ipa: "/fuːd/", definition: "Something to eat", example: "I like healthy food." },
            { word: "water", ipa: "/ˈwɔːtər/", definition: "A liquid for drinking", example: "We need clean water daily." },
            { word: "city", ipa: "/ˈsɪti/", definition: "A large town", example: "I live in a busy city." },
            { word: "country", ipa: "/ˈkʌntri/", definition: "A nation or rural area", example: "She moved to the country." },
            { word: "road", ipa: "/roʊd/", definition: "A path for travel", example: "The road was full of cars." },
            { word: "car", ipa: "/kɑːr/", definition: "A vehicle", example: "He drives a red car." },
            { word: "house", ipa: "/haʊs/", definition: "A building to live in", example: "We bought a new house." },
            { word: "room", ipa: "/ruːm/", definition: "A part of a building", example: "My room is very tidy." },
            { word: "door", ipa: "/dɔːr/", definition: "An entrance", example: "Please close the door." },
            { word: "window", ipa: "/ˈwɪndoʊ/", definition: "An opening in a wall", example: "I opened the window." },
            { word: "table", ipa: "/ˈteɪbəl/", definition: "A piece of furniture", example: "We eat at the table." },
            { word: "chair", ipa: "/tʃɛər/", definition: "A seat", example: "Sit on the chair." },
            { word: "bed", ipa: "/bɛd/", definition: "A place to sleep", example: "I sleep in my bed." },
            { word: "light", ipa: "/laɪt/", definition: "Brightness or a lamp", example: "Turn on the light." },
            { word: "phone", ipa: "/foʊn/", definition: "A communication device", example: "I use my phone daily." },
            { word: "computer", ipa: "/kəmˈpjuːtər/", definition: "An electronic device", example: "I work on my computer." },
            { word: "game", ipa: "/ɡeɪm/", definition: "An activity for fun", example: "We play a game together." },
            { word: "sport", ipa: "/spɔːrt/", definition: "A physical activity", example: "Soccer is my favorite sport." },
            { word: "music", ipa: "/ˈmjuːzɪk/", definition: "Sounds for enjoyment", example: "I listen to music every day." },
            { word: "art", ipa: "/ɑːrt/", definition: "Creative expression", example: "She studies art at school." },
            { word: "film", ipa: "/fɪlm/", definition: "A motion picture", example: "We watched a great film." },
            { word: "news", ipa: "/njuːz/", definition: "Current events", example: "I read the news online." },
            { word: "story", ipa: "/ˈstɔːri/", definition: "A tale or narrative", example: "He told a funny story." },
            { word: "lesson", ipa: "/ˈlɛsən/", definition: "A period of learning", example: "The lesson was very useful." },
            { word: "test", ipa: "/tɛst/", definition: "An examination", example: "I have a test tomorrow." },
            { word: "grade", ipa: "/ɡreɪd/", definition: "A score or level", example: "She got a good grade." },
            { word: "class", ipa: "/klæs/", definition: "A group of students", example: "My class is very friendly." },
            { word: "teacher", ipa: "/ˈtiːtʃər/", definition: "A person who teaches", example: "My teacher is very kind." },
            { word: "student", ipa: "/ˈstuːdnt/", definition: "A learner", example: "The student asked a question." },
            { word: "parent", ipa: "/ˈpɛərənt/", definition: "A mother or father", example: "My parents support me." },
            { word: "child", ipa: "/tʃaɪld/", definition: "A young person", example: "The child loves to play." },
            { word: "love", ipa: "/lʌv/", definition: "A strong affection", example: "I love my family." },
            { word: "hate", ipa: "/heɪt/", definition: "To dislike strongly", example: "I hate waking up early." },
            { word: "happy", ipa: "/ˈhæpi/", definition: "Feeling joy", example: "She was happy to see me." },
            { word: "sad", ipa: "/sæd/", definition: "Feeling sorrow", example: "He felt sad after the news." },
            { word: "angry", ipa: "/ˈæŋɡri/", definition: "Feeling mad", example: "She was angry about the delay." },
            { word: "excited", ipa: "/ɪkˈsaɪtɪd/", definition: "Feeling eager", example: "I’m excited for the trip." },
            { word: "tired", ipa: "/ˈtaɪərd/", definition: "Feeling sleepy", example: "I’m tired after work." },
            { word: "strong", ipa: "/strɒŋ/", definition: "Having power", example: "He is strong and healthy." },
            { word: "weak", ipa: "/wiːk/", definition: "Lacking strength", example: "She felt weak after the illness." },
            { word: "big", ipa: "/bɪɡ/", definition: "Large in size", example: "The house is very big." },
            { word: "small", ipa: "/smɔːl/", definition: "Little in size", example: "I need a small bag." },
            { word: "fast", ipa: "/fæst/", definition: "Quick in speed", example: "The car is very fast." },
            { word: "slow", ipa: "/sloʊ/", definition: "Not quick", example: "The turtle moves slow." },
            { word: "new", ipa: "/njuː/", definition: "Recently made", example: "I bought a new phone." },
            { word: "old", ipa: "/oʊld/", definition: "Not new", example: "This book is very old." },
            { word: "good", ipa: "/ɡʊd/", definition: "Of high quality", example: "This food is good." },
            { word: "bad", ipa: "/bæd/", definition: "Of low quality", example: "The weather is bad today." },
            { word: "easy", ipa: "/ˈiːzi/", definition: "Not difficult", example: "This game is easy." },
            { word: "hard", ipa: "/hɑːrd/", definition: "Difficult", example: "The test was hard." },
            { word: "early", ipa: "/ˈɜːrli/", definition: "Before the usual time", example: "I woke up early today." },
            { word: "late", ipa: "/leɪt/", definition: "After the usual time", example: "He arrived late." },
            { word: "long", ipa: "/lɒŋ/", definition: "Extended in length", example: "The movie was long." },
            { word: "short", ipa: "/ʃɔːrt/", definition: "Not long", example: "I need a short break." },
            { word: "hot", ipa: "/hɒt/", definition: "High in temperature", example: "The soup is hot." },
            { word: "cold", ipa: "/koʊld/", definition: "Low in temperature", example: "It’s cold outside." },
            { word: "dry", ipa: "/draɪ/", definition: "Without water", example: "The clothes are dry now." },
            { word: "wet", ipa: "/wɛt/", definition: "With water", example: "My shoes are wet." },
            { word: "clean", ipa: "/kliːn/", definition: "Free of dirt", example: "The room is clean." },
            { word: "dirty", ipa: "/ˈdɜːrti/", definition: "Not clean", example: "The floor is dirty." }
        ];

        let currentWordIndex = 0;
        let learnedWords = JSON.parse(localStorage.getItem('learnedWords')) || [];
        let wordNotes = JSON.parse(localStorage.getItem('wordNotes')) || {};

        // Mostrar flashcard
        function showFlashcard() {
            const word = words[currentWordIndex];
            document.getElementById('word').textContent = word.word;
            document.getElementById('ipa').textContent = word.ipa;
            document.getElementById('definition').textContent = word.definition;
            document.getElementById('example').textContent = word.example;
            document.getElementById('notes').value = wordNotes[word.word] || '';
            updateProgress();
            updateLearnedList();
        }

        // Marcar como aprendida
        function markLearned() {
            const word = words[currentWordIndex].word;
            if (!learnedWords.includes(word)) {
                learnedWords.push(word);
                localStorage.setItem('learnedWords', JSON.stringify(learnedWords));
                wordNotes[word] = document.getElementById('notes').value;
                localStorage.setItem('wordNotes', JSON.stringify(wordNotes));
                updateProgress();
                updateLearnedList();
            }
            nextWord();
        }

        // Siguiente palabra
        function nextWord() {
            currentWordIndex = (currentWordIndex + 1) % words.length;
            showFlashcard();
        }

        // Palabra aleatoria
        function randomWord() {
            currentWordIndex = Math.floor(Math.random() * words.length);
            showFlashcard();
        }

        // Actualizar progreso
        function updateProgress() {
            const learnedCount = learnedWords.length;
            const progressText = document.getElementById('progress-text');
            const progressBar = document.getElementById('progress-bar');
            progressText.textContent = `Palabras aprendidas: ${learnedCount}/170`;
            progressBar.style.width = `${(learnedCount / 170) * 100}%`;
        }

        // Actualizar lista de palabras aprendidas
        function updateLearnedList() {
            const list = document.getElementById('learned-list');
            list.innerHTML = learnedWords.length ? learnedWords.map(w => `<p>${w}</p>`).join('') : '<p>No words learned yet.</p>';
        }

        // Iniciar cuestionario
        function startQuiz() {
            document.getElementById('quiz').classList.remove('hidden');
            const randomIndex = Math.floor(Math.random() * words.length);
            currentWordIndex = randomIndex;
            document.getElementById('quiz-word').textContent = words[randomIndex].word;
            document.getElementById('quiz-answer').value = '';
            document.getElementById('quiz-feedback').textContent = '';
        }

        // Enviar respuesta del cuestionario
        function submitAnswer() {
            const answer = document.getElementById('quiz-answer').value.trim().toLowerCase();
            const correctDefinition = words[currentWordIndex].definition.toLowerCase();
            const isCorrect = answer.includes(correctDefinition.split(' ')[1]);
            const feedback = isCorrect ? 'Correct!' : `Incorrect. The definition is: ${correctDefinition}`;
            document.getElementById('quiz-feedback').textContent = feedback;
            const quizResults = JSON.parse(localStorage.getItem('quizResults')) || [];
            quizResults.push({
                word: words[currentWordIndex].word,
                correct: isCorrect,
                date: new Date().toLocaleDateString()
            });
            localStorage.setItem('quizResults', JSON.stringify(quizResults));
            updateQuizResults();
            setTimeout(startQuiz, 2000);
        }

        // Actualizar resultados del cuestionario
        function updateQuizResults() {
            const results = document.getElementById('quiz-results');
            const quizResults = JSON.parse(localStorage.getItem('quizResults')) || [];
            results.innerHTML = quizResults.length ? quizResults.map(r => `<p>${r.date}: ${r.word} - ${r.correct ? 'Correct' : 'Incorrect'}</p>`).join('') : '<p>No quiz results yet.</p>';
        }

        // Reiniciar la app
        function resetApp() {
            if (confirm('¿Estás seguro? Esto reiniciará todo.')) {
                if (confirm('¿Confirmas reiniciar la app?')) {
                    localStorage.clear();
                    location.reload();
                }
            }
        }

        // Guardar notas al cambiar
        document.getElementById('notes').addEventListener('input', function() {
            const word = words[currentWordIndex].word;
            wordNotes[word] = this.value;
            localStorage.setItem('wordNotes', JSON.stringify(wordNotes));
        });

        // Inicializar
        showFlashcard();
        updateQuizResults();
    </script>
</body>
</html>